<!-- MainWindow.xaml -->
<Window
    x:Class="MemoryCleaner.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MemoryCleaner"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d"
    Title="MemoryCleaner">

    <Grid>
        <Grid.Resources>
            <!-- 托盘提示文本资源 -->
            <x:String x:Key="TrayPhysicalMemoryText">物理内存:</x:String>
            <x:String x:Key="TrayVirtualMemoryText">虚拟内存:</x:String>
            <x:String x:Key="TraySystemWorkingSetText">系统工作集:</x:String>
            
            <!-- 移除托盘菜单定义 -->
        </Grid.Resources>
        <Grid.RowDefinitions>
            <!-- Title Bar and Menu Bar in same row -->
            <RowDefinition Height="Auto" />
            <!-- Menu Bar -->
            <RowDefinition Height="Auto" />
            <!-- 内存状态 -->
            <RowDefinition Height="Auto" />
            <!-- 清理选项 -->
            <RowDefinition Height="Auto" />
            <!-- 控制 -->
            <RowDefinition Height="Auto" />
            <!-- 文本浏览器 -->
            <RowDefinition Height="*" />
            <!-- 状态栏 -->
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TitleBar x:Name="AppTitleBar"
              Title="MemoryCleaner" Grid.Row="0" HorizontalAlignment="Left">
            <TitleBar.IconSource>
                <BitmapIconSource UriSource="Assets/app.png" ShowAsMonochrome="False"/>
            </TitleBar.IconSource>
        </TitleBar>

        <!-- 菜单栏移动到标题栏右侧 -->
        <muxc:MenuBar Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="150,0,10,0">
            <muxc:MenuBarItem Title="帮助">
                <MenuFlyoutItem x:Name="actionAbout" Text="关于"/>
                <MenuFlyoutItem x:Name="AuthorWebsite" Text="TheUserWW"/>
            </muxc:MenuBarItem>
            <muxc:MenuBarItem Title="语言">
                <MenuFlyoutItem x:Name="actionChinese" Text="简体中文"/>
                <MenuFlyoutItem x:Name="actionTraditionalChinese" Text="繁體中文"/>
                <MenuFlyoutItem x:Name="actionMongolian" Text="ᠮᠣᠩᠭᠣᠯ"/>
                <MenuFlyoutItem x:Name="actionUyghur" Text="ئۇيغۇرچە"/>
                <MenuFlyoutItem x:Name="actionEnglish" Text="English"/>
                <MenuFlyoutItem x:Name="actionFrench" Text="Français"/>
                <MenuFlyoutItem x:Name="actionRussian" Text="Русский"/>
                <MenuFlyoutItem x:Name="actionSpanish" Text="Español"/>
                <MenuFlyoutItem x:Name="actionGerman" Text="Deutsch"/>
                <MenuFlyoutItem x:Name="actionItalian" Text="Italiano"/>
                <MenuFlyoutItem x:Name="actionArabic" Text="العربية"/>
                <MenuFlyoutItem x:Name="actionKorean" Text="한국어"/>
                <MenuFlyoutItem x:Name="actionJapanese" Text="日本語"/>
            </muxc:MenuBarItem>
        </muxc:MenuBar>
        <!-- App content -->
        <Frame x:Name="rootFrame" Grid.Row="1"/>

        <!-- 内存状态组 -->
        <muxc:Expander x:Name="MemoryStatusExpander" Header="内存状态" Grid.Row="2" Margin="2" IsExpanded="True" HorizontalAlignment="Stretch">
            <Grid HorizontalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- 物理内存标签 -->
                <TextBlock x:Name="lbPhysicalLabel" Text="物理内存:" Grid.Row="0" Grid.Column="0" 
                           VerticalAlignment="Center" Margin="0,0,10,0" HorizontalAlignment="Left"/>
                <TextBlock x:Name="lbPhysicalValue" Text="0.00 GB / 0.00 GB" Grid.Row="0" Grid.Column="1" 
                           HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,0,0"/>
                <!-- 物理内存进度条 -->
                <ProgressBar x:Name="pbPhysical" Value="0" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" 
                           Margin="0,5,0,5" HorizontalAlignment="Stretch" 
                           Width="{Binding ActualWidth, ElementName=MemoryStatusExpander}"/>
    
                <!-- 虚拟内存标签 -->
                <TextBlock x:Name="lbVirtualLabel" Text="虚拟内存:" Grid.Row="2" Grid.Column="0" 
                           VerticalAlignment="Center" Margin="0,0,10,0" HorizontalAlignment="Left"/>
                <TextBlock x:Name="lbVirtualValue" Text="0.00 GB / 0.00 GB" Grid.Row="2" Grid.Column="1" 
                           HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,0,0"/>
                <!-- 虚拟内存进度条 -->
                <ProgressBar x:Name="pbVirtual" Value="0" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                           Margin="0,5,0,5" HorizontalAlignment="Stretch" 
                           Width="{Binding ActualWidth, ElementName=MemoryStatusExpander}"/>
    
                <!-- 系统工作集标签 -->
                <TextBlock x:Name="lbSystemWSLabel" Text="系统工作集:" Grid.Row="4" Grid.Column="0" 
                           VerticalAlignment="Center" Margin="0,0,10,0" HorizontalAlignment="Left"/>
                <TextBlock x:Name="lbSystemWSValue" Text="0.00 GB / 0.00 GB" Grid.Row="4" Grid.Column="1" 
                           HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,0,0"/>
                <!-- 系统工作集进度条 -->
                <ProgressBar x:Name="pbSystemWS" Value="0" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2" 
                           Margin="0,5,0,5" HorizontalAlignment="Stretch" 
                           Width="{Binding ActualWidth, ElementName=MemoryStatusExpander}"/>
            </Grid>
        </muxc:Expander>



        <!-- 清理选项组 -->
        <muxc:Expander Header="清理选项" Grid.Row="3" Margin="2" IsExpanded="True" HorizontalAlignment="Stretch">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <CheckBox x:Name="cbWorkingSet" Content="工作集" Grid.Row="0" Grid.Column="0" IsChecked="True" Margin="0,0,10,0"/>
                <CheckBox x:Name="cbSystemWorkingSet" Content="系统工作集" Grid.Row="0" Grid.Column="1" Margin="0,0,10,0"/>

                <CheckBox x:Name="cbStandbyList" Content="备用列表" Grid.Row="1" Grid.Column="0" IsChecked="True" Margin="0,0,10,0"/>
                <CheckBox x:Name="cbStandbyListLow" Content="低优先级备用列表" Grid.Row="1" Grid.Column="1" Margin="0,0,10,0"/>

                <CheckBox x:Name="cbModifiedPageList" Content="修改页面列表" Grid.Row="2" Grid.Column="0" Margin="0,0,10,0"/>
                <CheckBox x:Name="cbCombinePageList" Content="组合页面列表" Grid.Row="2" Grid.Column="1" Margin="0,0,10,0"/>
            </Grid>
        </muxc:Expander>

        <!-- 控制组 -->
        <muxc:Expander Header="控制" Grid.Row="4" Margin="2" IsExpanded="True" HorizontalAlignment="Stretch">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="btnCleanNow" Content="立即清理" Margin="5"/>
                <CheckBox x:Name="cbAutoClean" Content="自动清理" Margin="5"/>
                <TextBlock x:Name ="SetInterval" Text="间隔(秒):" Margin="5" VerticalAlignment="Center"/>
                <muxc:NumberBox x:Name="sbInterval" Minimum="5" Maximum="3600" Value="60" Width="60" Margin="5"/>
            </StackPanel>
        </muxc:Expander>

        <!-- 文本浏览器 -->
        <TextBox x:Name="textBrowser" Grid.Row="5" Margin="2" IsReadOnly="True" AcceptsReturn="True" TextWrapping="Wrap"/>
        <!-- 移除原来的MenuFlyout定义 -->
    </Grid>
</Window>